<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Interactive Debugger - Calyx Documentation</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../intro.html">Getting Started</a></li><li class="chapter-item expanded affix "><li class="part-title">Calyx Language</li><li class="chapter-item expanded "><a href="../tutorial/language-tut.html"><strong aria-hidden="true">1.</strong> Language Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../lang/multi-component.html"><strong aria-hidden="true">1.1.</strong> Multi-Component Designs</a></li><li class="chapter-item expanded "><a href="../lang/memories-by-reference.html"><strong aria-hidden="true">1.2.</strong> Passing Memories by Reference</a></li><li class="chapter-item expanded "><a href="../lang/attributes.html"><strong aria-hidden="true">1.3.</strong> Attributes</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Running Calyx Programs</li><li class="chapter-item expanded "><a href="../fud/index.html"><strong aria-hidden="true">2.</strong> fud: The Calyx Driver</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../fud/examples.html"><strong aria-hidden="true">2.1.</strong> Examples</a></li><li class="chapter-item expanded "><a href="../fud/xilinx.html"><strong aria-hidden="true">2.2.</strong> Xilinx Tools</a></li><li class="chapter-item expanded "><a href="../fud/external.html"><strong aria-hidden="true">2.3.</strong> External Stages</a></li><li class="chapter-item expanded "><a href="../fud/multiple-paths.html"><strong aria-hidden="true">2.4.</strong> Multiple Paths</a></li><li class="chapter-item expanded "><a href="../fud/circt.html"><strong aria-hidden="true">2.5.</strong> CIRCT</a></li></ol></li><li class="chapter-item expanded "><a href="../interpreter.html"><strong aria-hidden="true">3.</strong> The Calyx Interpreter</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../debug/cider.html" class="active"><strong aria-hidden="true">3.1.</strong> Interactive Debugger</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">The Calyx Compiler</li><li class="chapter-item expanded "><a href="../compiler.html"><strong aria-hidden="true">4.</strong> The Calyx Compiler</a></li><li class="chapter-item expanded "><a href="../libraries/core.html"><strong aria-hidden="true">5.</strong> Primitive Library</a></li><li class="chapter-item expanded "><a href="../optimizations/dataflow.html"><strong aria-hidden="true">6.</strong> Dataflow Analysis</a></li><li class="chapter-item expanded "><a href="../debug/index.html"><strong aria-hidden="true">7.</strong> Debugging</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../debug/debug.html"><strong aria-hidden="true">7.1.</strong> Tips</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Generating Calyx</li><li class="chapter-item expanded "><a href="../calyx-py.html"><strong aria-hidden="true">8.</strong> Emitting Calyx from Python</a></li><li class="chapter-item expanded "><a href="../tutorial/frontend-tut.html"><strong aria-hidden="true">9.</strong> Frontend Tutorial</a></li><li class="chapter-item expanded "><a href="../frontends/index.html"><strong aria-hidden="true">10.</strong> Frontend Compilers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../frontends/dahlia.html"><strong aria-hidden="true">10.1.</strong> Dahlia</a></li><li class="chapter-item expanded "><a href="../frontends/systolic-array.html"><strong aria-hidden="true">10.2.</strong> Systolic Array Generator</a></li><li class="chapter-item expanded "><a href="../frontends/tvm-relay.html"><strong aria-hidden="true">10.3.</strong> TVM Relay</a></li><li class="chapter-item expanded "><a href="../frontends/ntt.html"><strong aria-hidden="true">10.4.</strong> NTT Pipeline Generator</a></li><li class="chapter-item expanded "><a href="../frontends/mrxl.html"><strong aria-hidden="true">10.5.</strong> MrXL</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Tools</li><li class="chapter-item expanded "><a href="../tools/runt.html"><strong aria-hidden="true">11.</strong> Runt</a></li><li class="chapter-item expanded "><a href="../tools/exp-generator.html"><strong aria-hidden="true">12.</strong> exp Generator</a></li><li class="chapter-item expanded "><a href="../tools/editor-highlighting.html"><strong aria-hidden="true">13.</strong> Editor Highlighting</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Calyx Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-calyx-interactive-debugger"><a class="header" href="#the-calyx-interactive-debugger">The Calyx Interactive Debugger</a></h1>
<p>The Calyx Interactive Debugger is a prototype debugging tool built on top of the
[Calyx Interpreter][interp] which exposes a <a href="https://sourceware.org/gdb/">gdb</a>-like interface for
debugging Calyx programs.</p>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>If you are using <a href="/fud/index.html"><code>fud</code></a> getting started with the debugger is easy.
Assuming you are trying to debug a program called <code>my_program.futil</code> with data
file <code>my_program.futil.data</code>, invoke the debugger with the following command:</p>
<pre><code>fud e --to debugger -q my_program.futil -s verilog.data my_program.futil.data
</code></pre>
<p>This will open the target program in the interactive debugger. Note that <code>fud</code>
uses <strong>the quiet flag</strong>, <code>-q</code>, here. This prevents the printing from the <code>fud</code> tool
from conflicting the debugger as both tools interact with standard out.</p>
<h2 id="advancing-program-execution"><a class="header" href="#advancing-program-execution">Advancing Program execution</a></h2>
<h3 id="step"><a class="header" href="#step"><code>step</code></a></h3>
<p>The simplest way to advance the program is via the <code>step</code> command which causes
time to advance by a clock tick. It also has a shortcode: <code>s</code>.</p>
<pre><code> &gt; step
 &gt; s
</code></pre>
<p>The above snippet advances the program by two steps.</p>
<h3 id="step-over"><a class="header" href="#step-over"><code>step-over</code></a></h3>
<p>Another way to advance the program is via the <code>step-over</code> command. Unlike the
<code>step</code> command, this command requires a second argument which is the name of the
group to advance over. The <code>step-over</code> command then advances the program until
the given group is no longer running.</p>
<p>If you want to use the command to advance the program past a group <code>group_1</code>, do
the following:</p>
<pre><code> &gt; step-over group_1
</code></pre>
<p>Note that the <code>step-over</code> command will do nothing if the given group is not
running.</p>
<pre><code> &gt; step-over other_group
 Group is not running
 &gt;
</code></pre>
<h3 id="continue"><a class="header" href="#continue"><code>continue</code></a></h3>
<p>Finally, the continue command will run the program until either a breakpoint is
hit or the program terminates. This command is used in conjunction with
breakpoints and watchpoints to provide more targeted inspection. It may also be
accessed with the shortcode <code>c</code>.</p>
<pre><code> &gt; continue
Main component has finished executing. Debugger is now in inspection mode.
</code></pre>
<h2 id="breakpoints"><a class="header" href="#breakpoints">Breakpoints</a></h2>
<p>CIDR supports breakpoints on group definitions. This helps focus attention on
suspect portions of the code.</p>
<h3 id="setting-a-breakpoint"><a class="header" href="#setting-a-breakpoint">Setting a breakpoint</a></h3>
<p>Breakpoints may be set on the main component by simple specifying the group of
interest.</p>
<pre><code> &gt; break group_1
</code></pre>
<p>This is identical to</p>
<pre><code> &gt; break main::group_1
</code></pre>
<p>For sub-components, the name of the sub-component must be included with the
double colon separating the group name. To break on the <code>do_mul</code> group inside
the <code>pow</code> sub-component:</p>
<pre><code> &gt; break pow::do_mul
</code></pre>
<h3 id="managing-breakpoints"><a class="header" href="#managing-breakpoints">Managing breakpoints</a></h3>
<p>To see a list of breakpoints:</p>
<pre><code> &gt; info break
</code></pre>
<p>or</p>
<pre><code> &gt; ib
</code></pre>
<p>This produces output like this:</p>
<pre><code> &gt; ib
     Current breakpoints:
    1.  main::group_1  enabled
    2.  pow::do_mul enabled
</code></pre>
<p>All breakpoints have a number associated with them and they may be managed with
this number or the group name.</p>
<p>To enable or disable a breakpoint:</p>
<pre><code> &gt; disable group_1 2
 &gt; enable 1 pow::do_mul
</code></pre>
<p>Note that this is equivalent to:</p>
<pre><code> &gt; disable group_1
 &gt; disable 2
 &gt; enable 1
 &gt; enable pow::do_mul
</code></pre>
<p>To delete a breakpoint:</p>
<pre><code> &gt; delete 1
 &gt; del pow::do_mul
</code></pre>
<p>Deleted breakpoints will be entirely removed while disabled breakpoints will
remain until they are either enabled again or subsequently deleted. Disabled
breakpoints will not cause program execution to halt when <code>continue</code>-ing.</p>
<h2 id="inspecting-state"><a class="header" href="#inspecting-state">Inspecting State</a></h2>
<h3 id="display"><a class="header" href="#display"><code>display</code></a></h3>
<p>The display command dumps the full state of the main component without
formatting. Use the <code>print</code> and <code>print-state</code> commands for targeted inspection
with formatting.</p>
<h3 id="formatting-codes"><a class="header" href="#formatting-codes">Formatting codes</a></h3>
<p>CIDR supports several different formatting codes which do the hard work of
interpreting the data in human readable ways.</p>
<table><thead><tr><th>name</th><th>code</th><th>description</th></tr></thead><tbody>
<tr><td>binary</td><td></td><td>The default, a bit vector with the msb on the left</td></tr>
<tr><td>unsigned</td><td>\u</td><td>Unsigned bit-num formatting</td></tr>
<tr><td>signed</td><td>\s</td><td>Two's Complement formatting</td></tr>
<tr><td>unsigned fixedpoint</td><td>\u.N</td><td>For N &gt;=1. Unsigned Fixed-point with N fractional bits. The remaining bits are for the integral component.</td></tr>
<tr><td>signed fixedpoint</td><td>\s.N</td><td>For N &gt;=1. Signed Fixed-point with N fractional bits. The remaining bits are for the integral component.</td></tr>
</tbody></table>
<h3 id="print-and-print-state"><a class="header" href="#print-and-print-state"><code>print</code> and <code>print-state</code></a></h3>
<p>These commands allow inspecting <em>instance</em> state with optional formatting. Note
that this is different from breakpoints which operate on <em>definitions</em>. For example to print the ports of the <code>std_mul</code> instance named <code>mul</code> in the <code>pow</code> instance <code>pow_1</code> attached to the main component:</p>
<pre><code> &gt; print main.pow_1.mul
</code></pre>
<p>as with breakpoints, the leading <code>main</code> may be elided:</p>
<pre><code> &gt; print pow_1.mul
</code></pre>
<p>This will print all the ports attached to this multiplier instance with binary
formatting.</p>
<p>Formatting codes may be supplied as the first argument.</p>
<pre><code> &gt; print \u pow_1.mul
</code></pre>
<p>The <code>print</code> may also target specific ports on cells, rather than just the cell
itself. To see only the output of the multiplier (with unsigned formatting):</p>
<pre><code> &gt; print \u pow_1.mul.out
</code></pre>
<p>The <code>print-state</code> command works in the same way as the <code>print</code> command, except
it displays the internal state of a cell, rather than port values. As such, it
can only target cells and only those with some internal state, such as registers
or memories. For example, if the main component has a memory named <code>out_mem</code> its
contents may be viewed via:</p>
<pre><code> &gt; print-state main.out_mem
</code></pre>
<p>or just</p>
<pre><code> &gt; print-state out_mem
</code></pre>
<p>As with <code>print</code>, <code>print-state</code> supports formatting codes as an optional first
argument. So to view the contents of <code>out_mem</code> with a signed interpretation:</p>
<pre><code> &gt; print-state \s out_mem
</code></pre>
<h2 id="watchpoints"><a class="header" href="#watchpoints">Watchpoints</a></h2>
<p>Watchpoints are like breakpoints but rather than stop the execution when they
are passed, they instead print out some information. Like breakpoints, they are
set on group <em>definitions</em>, such as <code>main::group_1</code> or <code>pow::do_mul</code></p>
<h3 id="setting-watchpoints"><a class="header" href="#setting-watchpoints">Setting watchpoints</a></h3>
<p>The general form of watchpoints looks like</p>
<pre><code>watch [POSITION] GROUP with PRINT-COMMAND
</code></pre>
<p>where:</p>
<ul>
<li><code>GROUP</code> is the group definition to be watched</li>
<li><code>PRINT-COMMAND</code> is a full <code>print</code> or <code>print-state</code> command to be run by the watchpoint</li>
</ul>
<p>The optional <code>POSITION</code> argument may either be <code>before</code> or <code>after</code>. This
specifies whether the watchpoint should run when the group first becomes active
(<code>before</code>) or when the group finishes running (<code>after</code>). This defaults to
<code>before</code> if not set.</p>
<h3 id="managing-watchpoints"><a class="header" href="#managing-watchpoints">Managing watchpoints</a></h3>
<p>Watchpoint management is similar to breakpoints. However there may be multiple
watchpoints for a single group definition, so deleting watchpoints via the group
name will delete all the watchpoints associated with the group. Watchpoints do
not currently have an enable/disable state.</p>
<p>To view all the watchpoint definitions:</p>
<pre><code> &gt; info watch

...

 &gt; iw
</code></pre>
<p>To delete watchpoints:</p>
<pre><code> &gt; delete-watch 1
 &gt; del-watch main::group_1
</code></pre>
<h2 id="viewing-the-program-counter"><a class="header" href="#viewing-the-program-counter">Viewing the program counter</a></h2>
<p>There <code>where</code> command (alias <code>pc</code>) displays the currently running portion of the
control tree including active subcomponents. This can be used to more easily
determine the currently active portion of the design as well as visualize how
much of the execution is occurring in parallel at any given point.</p>
<h2 id="exiting-the-debugger"><a class="header" href="#exiting-the-debugger">Exiting the debugger</a></h2>
<p>Use <code>help</code> to see all commands. Use <code>exit</code> to exit the debugger.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../interpreter.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../compiler.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../interpreter.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../compiler.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
