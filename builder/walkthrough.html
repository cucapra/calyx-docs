<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Builder Library Walkthrough - Calyx Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Calyx Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <style>
.mdbook-callouts {
  padding: 8px 16px;
  margin-bottom: 16px;
  border-radius: 4px;
  /* border-left: 0.25em solid var(--mdbook-callouts-color); */
  background: var(--mdbook-callouts-background);
}

.mdbook-callouts > *:first-child {
  margin-top: 0;
}

.mdbook-callouts > *:last-child {
  margin-bottom: 0;
}

.mdbook-callouts-title {
  display: flex;
  font-weight: 600;
  align-items: center;
  line-height: 1;
  color: var(--mdbook-callouts-color);
  text-transform: capitalize;
}

.mdbook-callouts-icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
  background-color: currentColor;
  -webkit-mask: no-repeat center / 100%;
  mask: no-repeat center / 100%;
  -webkit-mask-image: var(--mdbook-callouts-icon);
  mask-image: var(--mdbook-callouts-icon);
}

/* icons at: https://lucide.dev/icons/ */

.mdbook-callouts-info {
  --mdbook-callouts-color: rgb(var(--color-blue-rgb));
  --mdbook-callouts-background: rgba(var(--color-blue-rgb), 0.1);
  /* https://lucide.dev/icons/info */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWluZm8iPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIi8+PHBhdGggZD0iTTEyIDE2di00Ii8+PHBhdGggZD0iTTEyIDhoLjAxIi8+PC9zdmc+');
}

.mdbook-callouts-abstract,
.mdbook-callouts-summary,
.mdbook-callouts-tldr {
  --mdbook-callouts-color: rgb(var(--color-cyan-rgb));
  --mdbook-callouts-background: rgba(var(--color-cyan-rgb), 0.1);
  /* https://lucide.dev/icons/clipboard-list */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNsaXBib2FyZC1saXN0Ij48cmVjdCB3aWR0aD0iOCIgaGVpZ2h0PSI0IiB4PSI4IiB5PSIyIiByeD0iMSIgcnk9IjEiLz48cGF0aCBkPSJNMTYgNGgyYTIgMiAwIDAgMSAyIDJ2MTRhMiAyIDAgMCAxLTIgMkg2YTIgMiAwIDAgMS0yLTJWNmEyIDIgMCAwIDEgMi0yaDIiLz48cGF0aCBkPSJNMTIgMTFoNCIvPjxwYXRoIGQ9Ik0xMiAxNmg0Ii8+PHBhdGggZD0iTTggMTFoLjAxIi8+PHBhdGggZD0iTTggMTZoLjAxIi8+PC9zdmc+');
}

.mdbook-callouts-todo {
  --mdbook-callouts-color: rgb(var(--color-blue-rgb));
  --mdbook-callouts-background: rgba(var(--color-blue-rgb), 0.1);
  /* https://lucide.dev/icons/check-circle-2 */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZWNrLWNpcmNsZS0yIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwYXRoIGQ9Im05IDEyIDIgMiA0LTQiLz48L3N2Zz4=');
}

.mdbook-callouts-note {
  --mdbook-callouts-color: rgb(var(--color-blue-rgb));
  --mdbook-callouts-background: rgba(var(--color-blue-rgb), 0.1);
  /* https://lucide.dev/icons/pencil */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXBlbmNpbCI+PHBhdGggZD0iTTE3IDNhMi44NSAyLjgzIDAgMSAxIDQgNEw3LjUgMjAuNSAyIDIybDEuNS01LjVaIi8+PHBhdGggZD0ibTE1IDUgNCA0Ii8+PC9zdmc+');
}

.mdbook-callouts-tip,
.mdbook-callouts-hint {
  --mdbook-callouts-color: rgb(var(--color-cyan-rgb));
  --mdbook-callouts-background: rgba(var(--color-cyan-rgb), 0.1);
  /* https://lucide.dev/icons/flame */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWZsYW1lIj48cGF0aCBkPSJNOC41IDE0LjVBMi41IDIuNSAwIDAgMCAxMSAxMmMwLTEuMzgtLjUtMi0xLTMtMS4wNzItMi4xNDMtLjIyNC00LjA1NCAyLTYgLjUgMi41IDIgNC45IDQgNi41IDIgMS42IDMgMy41IDMgNS41YTcgNyAwIDEgMS0xNCAwYzAtMS4xNTMuNDMzLTIuMjk0IDEtM2EyLjUgMi41IDAgMCAwIDIuNSAyLjV6Ii8+PC9zdmc+');
}

.mdbook-callouts-important {
  --mdbook-callouts-color: rgb(var(--color-purple-rgb));
  --mdbook-callouts-background: rgba(var(--color-purple-rgb), 0.1);
  /* https://lucide.dev/icons/alert-circle */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWFsZXJ0LWNpcmNsZSI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiLz48bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIvPjxsaW5lIHgxPSIxMiIgeDI9IjEyLjAxIiB5MT0iMTYiIHkyPSIxNiIvPjwvc3ZnPg==');
}

.mdbook-callouts-success,
.mdbook-callouts-check,
.mdbook-callouts-done {
  --mdbook-callouts-color: rgb(var(--color-green-rgb));
  --mdbook-callouts-background: rgba(var(--color-green-rgb), 0.1);
  /* https://lucide.dev/icons/check */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZWNrIj48cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiLz48L3N2Zz4=');
}

.mdbook-callouts-question,
.mdbook-callouts-help,
.mdbook-callouts-faq {
  --mdbook-callouts-color: rgb(var(--color-pink-rgb));
  --mdbook-callouts-background: rgba(var(--color-pink-rgb), 0.1);
  /* https://lucide.dev/icons/help-circle */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWhlbHAtY2lyY2xlIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwYXRoIGQ9Ik05LjA5IDlhMyAzIDAgMCAxIDUuODMgMWMwIDItMyAzLTMgMyIvPjxwYXRoIGQ9Ik0xMiAxN2guMDEiLz48L3N2Zz4=');
}

.mdbook-callouts-coding {
  --mdbook-callouts-color: rgb(var(--color-green-rgb));
  --mdbook-callouts-background: rgba(var(--color-green-rgb), 0.1);
  /* https://lucide.dev/icons/help-circle */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNvZGUiPjxwb2x5bGluZSBwb2ludHM9IjE2IDE4IDIyIDEyIDE2IDYiLz48cG9seWxpbmUgcG9pbnRzPSI4IDYgMiAxMiA4IDE4Ii8+PC9zdmc+');
}

.mdbook-callouts-challenge {
  --mdbook-callouts-color: rgb(var(--color-red-rgb));
  --mdbook-callouts-background: rgba(var(--color-red-rgb), 0.1);
  /* https://lucide.dev/icons/help-circle */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXN3b3JkcyI+PHBvbHlsaW5lIHBvaW50cz0iMTQuNSAxNy41IDMgNiAzIDMgNiAzIDE3LjUgMTQuNSIvPjxsaW5lIHgxPSIxMyIgeDI9IjE5IiB5MT0iMTkiIHkyPSIxMyIvPjxsaW5lIHgxPSIxNiIgeDI9IjIwIiB5MT0iMTYiIHkyPSIyMCIvPjxsaW5lIHgxPSIxOSIgeDI9IjIxIiB5MT0iMjEiIHkyPSIxOSIvPjxwb2x5bGluZSBwb2ludHM9IjE0LjUgNi41IDE4IDMgMjEgMyAyMSA2IDE3LjUgOS41Ii8+PGxpbmUgeDE9IjUiIHgyPSI5IiB5MT0iMTQiIHkyPSIxOCIvPjxsaW5lIHgxPSI3IiB4Mj0iNCIgeTE9IjE3IiB5Mj0iMjAiLz48bGluZSB4MT0iMyIgeDI9IjUiIHkxPSIxOSIgeTI9IjIxIi8+PC9zdmc+');
}

.mdbook-callouts-warning,
.mdbook-callouts-warn,
.mdbook-callouts-attention {
  --mdbook-callouts-color: rgb(var(--color-orange-rgb));
  --mdbook-callouts-background: rgba(var(--color-orange-rgb), 0.1);
  /* https://lucide.dev/icons/alert-triangle */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWFsZXJ0LXRyaWFuZ2xlIj48cGF0aCBkPSJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTNaIi8+PHBhdGggZD0iTTEyIDl2NCIvPjxwYXRoIGQ9Ik0xMiAxN2guMDEiLz48L3N2Zz4=');
}

.mdbook-callouts-caution {
  --mdbook-callouts-color: rgb(var(--color-red-rgb));
  --mdbook-callouts-background: rgba(var(--color-red-rgb), 0.1);
  /* https://lucide.dev/icons/shield-alert */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXNoaWVsZC1hbGVydCI+PHBhdGggZD0iTTEyIDIyczgtNCA4LTEwVjVsLTgtMy04IDN2N2MwIDYgOCAxMCA4IDEwIi8+PHBhdGggZD0iTTEyIDh2NCIvPjxwYXRoIGQ9Ik0xMiAxNmguMDEiLz48L3N2Zz4=');
}

.mdbook-callouts-failure,
.mdbook-callouts-fail,
.mdbook-callouts-missing {
  --mdbook-callouts-color: rgb(var(--color-red-rgb));
  --mdbook-callouts-background: rgba(var(--color-red-rgb), 0.1);
  /* https://lucide.dev/icons/x */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXgiPjxwYXRoIGQ9Ik0xOCA2IDYgMTgiLz48cGF0aCBkPSJtNiA2IDEyIDEyIi8+PC9zdmc+');
}

.mdbook-callouts-error,
.mdbook-callouts-danger {
  --mdbook-callouts-color: rgb(var(--color-red-rgb));
  --mdbook-callouts-background: rgba(var(--color-red-rgb), 0.1);
  /* https://lucide.dev/icons/zap */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXphcCI+PHBvbHlnb24gcG9pbnRzPSIxMyAyIDMgMTQgMTIgMTQgMTEgMjIgMjEgMTAgMTIgMTAgMTMgMiIvPjwvc3ZnPg==');
}

.mdbook-callouts-bug {
  --mdbook-callouts-color: rgb(var(--color-red-rgb));
  --mdbook-callouts-background: rgba(var(--color-red-rgb), 0.1);
  /* https://lucide.dev/icons/bug */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWJ1ZyI+PHBhdGggZD0ibTggMiAxLjg4IDEuODgiLz48cGF0aCBkPSJNMTQuMTIgMy44OCAxNiAyIi8+PHBhdGggZD0iTTkgNy4xM3YtMWEzLjAwMyAzLjAwMyAwIDEgMSA2IDB2MSIvPjxwYXRoIGQ9Ik0xMiAyMGMtMy4zIDAtNi0yLjctNi02di0zYTQgNCAwIDAgMSA0LTRoNGE0IDQgMCAwIDEgNCA0djNjMCAzLjMtMi43IDYtNiA2Ii8+PHBhdGggZD0iTTEyIDIwdi05Ii8+PHBhdGggZD0iTTYuNTMgOUM0LjYgOC44IDMgNy4xIDMgNSIvPjxwYXRoIGQ9Ik02IDEzSDIiLz48cGF0aCBkPSJNMyAyMWMwLTIuMSAxLjctMy45IDMuOC00Ii8+PHBhdGggZD0iTTIwLjk3IDVjMCAyLjEtMS42IDMuOC0zLjUgNCIvPjxwYXRoIGQ9Ik0yMiAxM2gtNCIvPjxwYXRoIGQ9Ik0xNy4yIDE3YzIuMS4xIDMuOCAxLjkgMy44IDQiLz48L3N2Zz4=');
}

.mdbook-callouts-examples,
.mdbook-callouts-example {
  --mdbook-callouts-color: rgb(var(--color-purple-rgb));
  --mdbook-callouts-background: rgba(var(--color-purple-rgb), 0.1);
  /* https://lucide.dev/icons/list */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWxpc3QiPjxsaW5lIHgxPSI4IiB4Mj0iMjEiIHkxPSI2IiB5Mj0iNiIvPjxsaW5lIHgxPSI4IiB4Mj0iMjEiIHkxPSIxMiIgeTI9IjEyIi8+PGxpbmUgeDE9IjgiIHgyPSIyMSIgeTE9IjE4IiB5Mj0iMTgiLz48bGluZSB4MT0iMyIgeDI9IjMuMDEiIHkxPSI2IiB5Mj0iNiIvPjxsaW5lIHgxPSIzIiB4Mj0iMy4wMSIgeTE9IjEyIiB5Mj0iMTIiLz48bGluZSB4MT0iMyIgeDI9IjMuMDEiIHkxPSIxOCIgeTI9IjE4Ii8+PC9zdmc+');
}

.mdbook-callouts-quote {
  --mdbook-callouts-color: rgb(158, 158, 158);
  --mdbook-callouts-background: rgba(158, 158, 158, 0.1);
  /* https://lucide.dev/icons/quote */
  --mdbook-callouts-icon: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXF1b3RlIj48cGF0aCBkPSJNMyAyMWMzIDAgNy0xIDctOFY1YzAtMS4yNS0uNzU2LTIuMDE3LTItMkg0Yy0xLjI1IDAtMiAuNzUtMiAxLjk3MlYxMWMwIDEuMjUuNzUgMiAyIDIgMSAwIDEgMCAxIDF2MWMwIDEtMSAyLTIgMnMtMSAuMDA4LTEgMS4wMzFWMjBjMCAxIDAgMSAxIDF6Ii8+PHBhdGggZD0iTTE1IDIxYzMgMCA3LTEgNy04VjVjMC0xLjI1LS43NTctMi4wMTctMi0yaC00Yy0xLjI1IDAtMiAuNzUtMiAxLjk3MlYxMWMwIDEuMjUuNzUgMiAyIDJoLjc1YzAgMi4yNS4yNSA0LTIuNzUgNHYzYzAgMSAwIDEgMSAxeiIvPjwvc3ZnPg==');
}


.ayu {
  --color-red-rgb: 251, 70, 76;
  --color-red: #fb464c;
  --color-orange-rgb: 233, 151, 63;
  --color-orange: #e9973f;
  --color-yellow-rgb: 224, 222, 113;
  --color-yellow: #e0de71;
  --color-green-rgb: 68, 207, 110;
  --color-green: #44cf6e;
  --color-cyan-rgb: 83, 223, 221;
  --color-cyan: #53dfdd;
  --color-blue-rgb: 2, 122, 255;
  --color-blue: #027aff;
  --color-purple-rgb: 168, 130, 255;
  --color-purple: #a882ff;
  --color-pink-rgb: 250, 153, 205;
  --color-pink: #fa99cd;
}

.light {
  --color-red-rgb: 233, 49, 71;
  --color-red: #e93147;
  --color-orange-rgb: 236, 117, 0;
  --color-orange: #ec7500;
  --color-yellow-rgb: 224, 172, 0;
  --color-yellow: #e0ac00;
  --color-green-rgb: 8, 185, 78;
  --color-green: #08b94e;
  --color-cyan-rgb: 0, 191, 188;
  --color-cyan: #00bfbc;
  --color-blue-rgb: 8, 109, 221;
  --color-blue: #086ddd;
  --color-purple-rgb: 120, 82, 238;
  --color-purple: #7852ee;
  --color-pink-rgb: 213, 57, 132;
  --color-pink: #d53984;
}

.coal {
  --color-red-rgb: 251, 70, 76;
  --color-red: #fb464c;
  --color-orange-rgb: 233, 151, 63;
  --color-orange: #e9973f;
  --color-yellow-rgb: 224, 222, 113;
  --color-yellow: #e0de71;
  --color-green-rgb: 68, 207, 110;
  --color-green: #44cf6e;
  --color-cyan-rgb: 83, 223, 221;
  --color-cyan: #53dfdd;
  --color-blue-rgb: 2, 122, 255;
  --color-blue: #027aff;
  --color-purple-rgb: 168, 130, 255;
  --color-purple: #a882ff;
  --color-pink-rgb: 250, 153, 205;
  --color-pink: #fa99cd;
}

.navy {
  --color-red-rgb: 251, 70, 76;
  --color-red: #fb464c;
  --color-orange-rgb: 233, 151, 63;
  --color-orange: #e9973f;
  --color-yellow-rgb: 224, 222, 113;
  --color-yellow: #e0de71;
  --color-green-rgb: 68, 207, 110;
  --color-green: #44cf6e;
  --color-cyan-rgb: 83, 223, 221;
  --color-cyan: #53dfdd;
  --color-blue-rgb: 2, 122, 255;
  --color-blue: #027aff;
  --color-purple-rgb: 168, 130, 255;
  --color-purple: #a882ff;
  --color-pink-rgb: 250, 153, 205;
  --color-pink: #fa99cd;
}

.rust {
  --color-red-rgb: 233, 49, 71;
  --color-red: #e93147;
  --color-orange-rgb: 236, 117, 0;
  --color-orange: #ec7500;
  --color-yellow-rgb: 224, 172, 0;
  --color-yellow: #e0ac00;
  --color-green-rgb: 8, 185, 78;
  --color-green: #08b94e;
  --color-cyan-rgb: 0, 191, 188;
  --color-cyan: #00bfbc;
  --color-blue-rgb: 8, 109, 221;
  --color-blue: #086ddd;
  --color-purple-rgb: 120, 82, 238;
  --color-purple: #7852ee;
  --color-pink-rgb: 213, 57, 132;
  --color-pink: #d53984;
}

</style>
<h1 id="builder-library-walkthrough"><a class="header" href="#builder-library-walkthrough">Builder Library Walkthrough</a></h1>
<p>This is an extended walkthough of all the features of the Calyx builder library. The builder library is an embedded DSL, embedded in Python, that allows users to generate Calyx code programmatically.</p>
<p>This page seeks to demonstrate all the features of the builder library. For a quick start, we refer you to the <a href="calyx-py.html">hello world example</a>.</p>
<p>We will make repeated references to the example program <a href="https://github.com/calyxir/calyx/blob/master/calyx-py/test/walkthrough.py"><code>walkthrough.py</code></a>, which emits the Calyx code<a href="https://github.com/calyxir/calyx/blob/master/calyx-py/test/walkthrough.expect"><code>walkthrough.expect</code></a> when run. We recommend that you refer to these files as you work through this document.</p>
<h2 id="components"><a class="header" href="#components">Components</a></h2>
<p>We add a component to our program as follows:</p>
<pre><code class="language-python">    comp = prog.component("adder")
</code></pre>
<h2 id="ports-of-components"><a class="header" href="#ports-of-components">Ports of Components</a></h2>
<p>We specify the names and bitwidths of any ports that we want a component to have as follows:</p>
<pre><code class="language-python">    val1 = comp.input("val1", 32)
    val2 = comp.input("val2", 32)
    comp.output("out", 32)
</code></pre>
<p>Observe that we have saved handles to the input ports by assigning them to Python variables, but have not done the same with the output port.
We will show shortly how to create a handle to a port after its definition.</p>
<p>It is also possible to create ports that have <a href="https://docs.calyxir.org/lang/attributes.html">attributes</a>. Attributes can either
be described as a string or a (string, value) tuple.
A string such as <code>"data"</code>, which will create an <code>@data</code> attribute.
A (string, value) tuple such as <code>("done", 1)</code> will create an <code>@done(1)</code> attribute.</p>
<pre><code class="language-python">    comp.output("out_2", 1, ["data"])
    comp.output("out_3", 1, ["data", ("done", 1)])
</code></pre>
<h2 id="cells"><a class="header" href="#cells">Cells</a></h2>
<p>We add cells to the component as follows.
The standard cells are all supported.
Bitwidths must be passed as arguments, while names are optional.</p>
<pre><code class="language-python">    sum = comp.reg(32)
    add = comp.add(32)
</code></pre>
<p>The adder defined above is unsigned; we would define a signed variant as:</p>
<pre><code class="language-python">    add = comp.add(32, signed=True)
</code></pre>
<h2 id="groups"><a class="header" href="#groups">Groups</a></h2>
<p>We begin a group with:</p>
<pre><code class="language-python">    with comp.group("compute_sum") as compute_sum:
</code></pre>
<p>We add wires within a group by staying within the indentation of the <code>with</code> block.</p>
<p><a href="../lang/ref.html#comb-group-definitions">Combinational groups</a> are written similarly, but with <code>comb_group</code> instead of <code>group</code>:</p>
<pre><code class="language-python">    with comp.comb_group("update_register") as update_register:

</code></pre>
<p>Static groups are written with <code>static_group</code>, and must specify a latency. The group below will take 3 cycles to execute:</p>
<pre><code class="language-python">    with comp.static_group("multiply", 3) as compute_sum:
</code></pre>
<h2 id="ports-of-cells"><a class="header" href="#ports-of-cells">Ports of Cells</a></h2>
<p>We access ports of cells using dot notation.</p>
<pre><code class="language-python">        add.left = val1
        add.right = val2
</code></pre>
<h3 id="special-case-in_"><a class="header" href="#special-case-in_">Special Case: <code>in_</code></a></h3>
<p>We specify the value to be written to a register with:</p>
<pre><code class="language-python">        sum.in_ = add.out
</code></pre>
<p>Although the Calyx port is named <code>in</code>, we must write <code>in_</code> in the eDSL to avoid a clash with Python's <code>in</code> keyword.</p>
<h2 id="hi-and-lo-signals"><a class="header" href="#hi-and-lo-signals"><code>HI</code> and <code>LO</code> Signals</a></h2>
<p>The builder library provides shorthand for high and low signals.</p>
<pre><code class="language-python">        sum.write_en = cb.HI
</code></pre>
<p>There is a corresponding <code>LO</code> signal.
These are just one-bit values <code>1</code> and <code>0</code>, respectively.</p>
<h2 id="group-done-signals"><a class="header" href="#group-done-signals">Group <code>done</code> Signals</a></h2>
<p>Groups that are not <a href="../lang/ref.html#comb-group-definitions">combinational</a> must raise a <code>done</code> signal.</p>
<pre><code class="language-python">        compute_sum.done = sum.done
</code></pre>
<h2 id="accessing-output-ports-of-components"><a class="header" href="#accessing-output-ports-of-components">Accessing Output Ports of Components</a></h2>
<p>We can create a handle to a port after its definition.</p>
<pre><code class="language-python">    with comp.continuous:
        comp.this().out = sum.out
</code></pre>
<p>That is, <code>comp.this().out</code> is a handle to the port named "out" on the component whose handle is <code>comp</code>.</p>
<p>Accessing ports in this way may feel silly, since we have already shown that we can save handles to ports by assigning them to Python variables. This does work for input ports, but not for output ports.</p>
<p>Say we had saved a handle to the output port of the adder component:</p>
<pre><code>out = comp.output("out", 32)
</code></pre>
<p>Now say we wanted to say that the output port gets the value of the sum's output port:</p>
<pre><code class="language-python">out = sum.out
</code></pre>
<p>Python will get in our way because it will think that <code>out</code> is a variable that is written to (twice!) but never read from.</p>
<p>To avoid this, we use the <code>this()</code> method to access the output ports of a component.</p>
<h2 id="continuous-assignments"><a class="header" href="#continuous-assignments">Continuous Assignments</a></h2>
<p><a href="../lang/ref.html#continuous-assignments">Continuous assignments</a> are added using <code>with {component}.continuous:</code>.</p>
<pre><code class="language-python">    with comp.continuous:
        comp.this().out = sum.out
</code></pre>
<h2 id="simple-control-program"><a class="header" href="#simple-control-program">Simple Control Program</a></h2>
<p>A simple control program is added to the component as follows.
This is just <a href="../lang/ref.html#group-enable">enabling</a> the group that we have defined.</p>
<pre><code class="language-python">    comp.control += compute_sum
</code></pre>
<h2 id="binary-operation-and-store"><a class="header" href="#binary-operation-and-store">Binary Operation and Store</a></h2>
<p>The library provides a shorthand for the common pattern of performing a binary operation and writing the result to a register.</p>
<pre><code class="language-python">    diff_group_1, _ = comp.sub_store_in_reg(val1, val2, diff)
</code></pre>
<p>Here <code>diff</code> is a handle to a register that we have defined earlier. This single line of Python adds lines to the <code>cells</code> and the <code>wires</code> sections of the Calyx code:</p>
<pre><code>  cells {
    sub_1 = std_sub(32);
  }
  wires {
    group sub_1_group {
      sub_1.left = val1;
      sub_1.right = val2;
      diff.write_en = 1'd1;
      diff.in = sub_1.out;
      sub_1_group[done] = diff.done;
    }
  }
</code></pre>
<p>In Python, its return value is a handle to the group that it has created, and a handle to the register is has written to. In the line of Python above, we have saved the handle to the group (as <code>diff_group_1</code>) but have discarded the handle to the register using a <code>_</code> variable name since we already have a handle to the register, <code>diff</code>.</p>
<p>This construct can also be called without passing a register, in which case it will create a register and return it. It is useful in that case to save the handle to the register.</p>
<h2 id="operation-use"><a class="header" href="#operation-use">Operation-Use</a></h2>
<p>The library provides a shorthand for the common pattern of performing a binary operation and using the result combinationally.</p>
<pre><code class="language-python">    val2_lt_val1 = comp.lt_use(val2, val1)
</code></pre>
<p>This line of Python adds lines to the <code>cells</code> and the <code>wires</code> sections of the Calyx code:</p>
<pre><code>cells {
    lt_3 = std_lt(32);
  }
  wires {
    comb group lt_3_group {
      lt_3.left = val2;
      lt_3.right = val1;
    }
  }
</code></pre>
<p>Note that the group is combinational, and so does not need a <code>done</code> signal.</p>
<p>The value returned by this function, which we have saved above as <code>val2_lt_val1</code> is in fact a tuple of handles: a handle to the group that it has created and a handle to the cell that that group uses. We shall see shortly how to use this tuple.</p>
<h2 id="complex-control-par-seq-if"><a class="header" href="#complex-control-par-seq-if">Complex Control: <code>par</code>, <code>seq</code>, <code>if</code></a></h2>
<p>Let us work through a slightly more complex control program.</p>
<pre><code class="language-python">    comp.control += cb.par(
        [
            val1_ge_val2,
            cb.if_(ge_reg.out, diff_group_1, diff_group_2),
        ],
        cb.if_with(val2_lt_val1, diff_group_2, diff_group_1),
    )
</code></pre>
<p>We run control operators in <a href="../lang/ref.html#seq">sequence</a> by making them elements of a list. This is why the group <code>val1_ge_val2</code> runs before the if check written on the next line.</p>
<p>We run control operators in <a href="../lang/ref.html#par">parallel</a> by passing them to the <code>par</code> function.</p>
<p>The <code>if_</code> function (named with the underscore to avoid clashing with Python's <code>if</code> keyword) is a straightforward <a href="../lang/ref.html#if">if</a> check. It takes a condition, a body, and an optional else body.</p>
<p>The <code>if_with</code> function is a slightly more complex <a href="../lang/ref.html#if">if</a> check. It takes a (<code>cell</code>, <code>comb_group</code>) tuple, a body, and an optional else body.
It generates a combinational if check, of the form</p>
<pre><code>if cell.out with comb_group ...
</code></pre>
<p>It is especially useful in concert with the <code>Operation-Use</code> construct, which returns exactly such a tuple of a cell and a group.</p>
<h2 id="multi-component-designs"><a class="header" href="#multi-component-designs">Multi-Component Designs</a></h2>
<p>Using one component in another is straightforward.</p>
<p>We must first define the called component as a cell of the calling component, and then we can use the cell as usual.</p>
<p>Say we have a handle, <code>diff_comp</code>, to the component that we wish to call. Say also that we know that the component has input ports <code>val1</code> and <code>val2</code>, and an output port <code>out</code>.</p>
<p>We can write:</p>
<pre><code class="language-python">    abs_diff = comp.cell("abs_diff", diff_comp)
    with comp.group("compute_diff") as diff_group:
        abs_diff.val1 = val1
        abs_diff.val2 = val2
        abs_diff.go = cb.HI
        mux.write_en = abs_diff.done
        mux.in_ = abs_diff.out
        diff_group.done = mux.done
</code></pre>
<p>Although the called component did not have explicit <code>go</code> and <code>done</code> ports, the builder library has added them for us.
We use these ports to guide the execution of the group.
We assert the <code>go</code> signal to the called component with <code>diff_comp.go = HI</code>, and then, by writing <code>mux.write_en = abs_diff.done</code>, we make the write to the register <code>mux</code> conditional on the <code>done</code> signal of the called component.</p>
<h2 id="memories"><a class="header" href="#memories">Memories</a></h2>
<p>We can define memories in a component as follows:</p>
<pre><code class="language-python">    mem = comp.comb_mem_d1("mem", 32, 10, 32, is_ref=True)
</code></pre>
<p>This is a 1-D memory with ten 32-bit entries, each 32 bits wide. We have additionally declared that this memory will be passed to the component <a href="../lang/memories-by-reference.html#passing-cells-by-reference">by reference</a>. We shall see how shortly.</p>
<h2 id="miscellaneous-higher-level-constructors"><a class="header" href="#miscellaneous-higher-level-constructors">Miscellaneous Higher-Level Constructors</a></h2>
<p>As patterns of use emerge, we can add further constructors to the builder library to support common use-cases.
For example, we can add a constructor that increments a register by a constant value.</p>
<pre><code class="language-python">    incr_i = comp.incr(i)
</code></pre>
<p>That line of Python adds lines to the <code>cells</code> and the <code>wires</code> sections of the Calyx code:</p>
<pre><code>  cells {
    i_incr = std_add(8);
  }
  wires {
    group i_incr_group {
      i_incr.left = i.out;
      i_incr.right = 8'd1;
      i.write_en = 1'd1;
      i.in = i_incr.out;
      i_incr_group[done] = i.done;
    }
  }
</code></pre>
<p>The Python return value, <code>incr_i</code>, is a handle to the group that performs the incrementing. The method defaults to incrementing by 1, but can be passed any value.</p>
<h2 id="guarded-assignments"><a class="header" href="#guarded-assignments">Guarded Assignments</a></h2>
<p>Consider the group that multiplies the memory at the cell pointed to by register <code>i</code> by the value <code>v</code>.</p>
<pre><code class="language-python">    with comp.group("mul_at_position_i") as mul_at_position_i:
        mem.addr0 = i.out
        mul.left = mem.read_data
        mul.right = v
        mem.write_en = mul.done @ cb.HI
        mem.write_data = mul.out
        mul_at_position_i.done = mem.done
</code></pre>
<p>The first few lines are straightforward; we are setting the cell to be read from with <code>addr0</code>, reading from that cell and driving the value to the multiplier's left port, and setting the right port of the multiplier to the value <code>v</code>.</p>
<p>Now we wish to write the result to the memory at the cell pointed to by register <code>i</code>, but only once we know that the multiplier has finished its work. We do this with a guarded assignment, using the <code>@</code> operator:</p>
<pre><code class="language-python">        mem.write_en = mul.done @ cb.HI
</code></pre>
<p>In Calyx, we would have written this guarded assignment with a question mark:</p>
<pre><code>        mem.write_en = mul.done ? 1'd1;
</code></pre>
<p>We use the <code>@</code> operator in the builder library to avoid clashing with Python's ternary operator.</p>
<h2 id="complex-control-while"><a class="header" href="#complex-control-while">Complex Control: <code>while</code></a></h2>
<p>The builder library supports <a href="../lang/ref.html#while">while</a> loops and also the higher-level <code>while_with</code> constructor.</p>
<pre><code class="language-python">    comp.control += cb.while_with(i_lt_10, [mul_at_position_i, incr_i])
</code></pre>
<p>Here <code>i_lt_10</code> is a tuple of two handles, exactly as returned by the <code>Operation-Use</code> constructor. The <code>while_with</code> constructor takes this tuple and a body.</p>
<h2 id="external-memories"><a class="header" href="#external-memories">External Memories</a></h2>
<p>We can define <a href="../lang/data-format.html#external-memories">external memories</a> in a component, typically the <code>main</code> component, as follows:</p>
<pre><code class="language-python">    mymem = comp.comb_mem_d1("mymem", 32, 10, 32, is_external=True)
</code></pre>
<h2 id="invoking-components"><a class="header" href="#invoking-components">Invoking Components</a></h2>
<p>We can <a href="../lang/ref.html#invoke">invoke</a> components as follows:</p>
<pre><code class="language-python">        cb.invoke(map, ref_mem=mymem, in_v=cb.const(32, 42))
</code></pre>
<p>That is, we have a Python-level handle to some component <code>map</code> that has one memory called <code>mem</code> that it expects to be passed <a href="../lang/memories-by-reference.html#passing-cells-by-reference">by reference</a>, and one input port called <code>v</code>.
We must prepend <code>ref_</code> to the names of any memories, and <code>in_</code> to the names of any input ports.</p>
<h2 id="building-the-program"><a class="header" href="#building-the-program">Building the Program</a></h2>
<p>Finally, we build the program.</p>
<pre><code class="language-python">def build():
    prog = cb.Builder(fileinfo_base_path=os.path.dirname(os.path.realpath(__file__)))
    insert_adder_component(prog)
    diff_comp = insert_abs_diff_component(prog)
    insert_mux_component(prog, diff_comp)
    map_comp = insert_map_component(prog)
    insert_main_component(prog, map_comp)
    return prog.program
</code></pre>
<p>Note that all of our component-inserting helpers have been <em>returning</em> the components that they have created. This is so that we can build complex programs where components either call each other as cells or invoke each other.</p>
<p>This is why we save a Python-level handle to the <code>diff_comp</code> component that we have defined, and then pass it to the <code>insert_mux_component</code> function. As we have seen, the <code>mux</code> uses <code>diff_comp</code> as a cell.</p>
<p>We also save a Python-level handle to the <code>map</code> component that we have defined, and then pass it to the <code>insert_main_component</code> function. As we have seen, <code>map</code> is invoked by <code>main</code>.</p>
<h2 id="emitting-the-program"><a class="header" href="#emitting-the-program">Emitting the Program</a></h2>
<p>Finally, we emit Calyx.</p>
<pre><code class="language-python">if __name__ == "__main__":
    build().emit()
</code></pre>
<h2 id="retrieving-items-by-name"><a class="header" href="#retrieving-items-by-name">Retrieving Items by Name</a></h2>
<p>In the discussion so far, we have guided you towards a pattern of defining an item (a cell, a group, a component, etc.) and then saving a handle to it as a Python variable. This is a good pattern to follow, but it is not the only one.</p>
<p>To reference a component without an existing handle to it, use the <code>Builder().get_component()</code> method.</p>
<pre><code class="language-python">prog.component("my_component")
# a few lines later
my_component = prog.get_component("my_component")
</code></pre>
<p>To access the input and output ports of a component within the definition of a component, use the syntax <code>my_component.this().port</code>.</p>
<pre><code class="language-python">def add_my_component(prog):
    my_component = prog.component("my_component")
    my_component.output("my_output", 32)

    with my_component.group("my_group"):
        my_component.this().my_output = const(32, 1)
</code></pre>
<p>In order to reference a cell without a handle use the <code>Builder().get_cell()</code> method.</p>
<pre><code class="language-python">my_component.reg("my_reg", 32)
# a few lines later
my_reg = prog.get_cell("my_reg")
</code></pre>
<p>A group can be retrieved with the <code>Builder().get_group()</code> method. It's possible to retrieve combinational groups as well as regular groups with this method.</p>
<pre><code class="language-python">with my_component.group("my_group"):
    # group definition here
# a few lines later
my_group = prog.get_group("my_group")

</code></pre>
<h2 id="defining-component-attributes"><a class="header" href="#defining-component-attributes">Defining Component Attributes</a></h2>
<p>Components can be given attributes. Similar to ports, just specify the name of the attribute and its value.
Note that <code>attribute(name, value)</code> does not return a handle to the attribute.</p>
<pre><code class="language-python">my_component.attribute("my_attribute", 1)
</code></pre>
<p>Will create a component that looks like:</p>
<pre><code>component my_component&lt;"my_attribute"=1&gt;(...) -&gt; (...) {
</code></pre>
<h2 id="importing-calyx-libraries"><a class="header" href="#importing-calyx-libraries">Importing Calyx Libraries</a></h2>
<p>The builder library imports necessary Calyx libraries automatically. However, it is possible to import additional libraries manually.</p>
<pre><code class="language-python">prog = cb.Builder()
prog.import_("primitives/binary_operators.futil")
</code></pre>
<h2 id="explictly-stating-widths"><a class="header" href="#explictly-stating-widths">Explictly Stating Widths</a></h2>
<p>Usually, the builder library can automatically infer the widths of constants. In cases where it cannot, it will complain at Python compilation. Use the <code>const(width, value)</code> expression to explicitly state the width of a constant.</p>
<pre><code class="language-python">my_cell.my_port = const(32, 1)
</code></pre>
<h2 id="components-with-known-latency"><a class="header" href="#components-with-known-latency">Components with Known Latency</a></h2>
<p>You can declare a component to be <code>static</code> by stating its latency when declaring it.
For instance, our contrived adder from above could be declared as static with a latency of one cycle as follows:</p>
<pre><code class="language-python">comp = prog.component("adder", latency=1)
</code></pre>
<p>As a reminder,  the regular version is just:</p>
<pre><code class="language-python">comp = prog.component("adder")
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../builder/calyx-py.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../tutorial/frontend-tut.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../builder/calyx-py.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../tutorial/frontend-tut.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
